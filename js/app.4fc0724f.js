(function(e){function t(t){for(var a,o,s=t[0],i=t[1],l=t[2],u=0,d=[];u<s.length;u++)o=s[u],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&d.push(r[o][0]),r[o]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a]);p&&p(t);while(d.length)d.shift()();return n.push.apply(n,l||[]),c()}function c(){for(var e,t=0;t<n.length;t++){for(var c=n[t],a=!0,s=1;s<c.length;s++){var i=c[s];0!==r[i]&&(a=!1)}a&&(n.splice(t--,1),e=o(o.s=c[0]))}return e}var a={},r={app:0},n=[];function o(t){if(a[t])return a[t].exports;var c=a[t]={i:t,l:!1,exports:{}};return e[t].call(c.exports,c,c.exports,o),c.l=!0,c.exports}o.m=e,o.c=a,o.d=function(e,t,c){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:c})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var c=Object.create(null);if(o.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(c,a,function(t){return e[t]}.bind(null,a));return c},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/test_crypto/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],i=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var p=i;n.push([0,"chunk-vendors"]),c()})({0:function(e,t,c){e.exports=c("56d7")},1393:function(e,t,c){"use strict";c("b085")},"553b":function(e,t,c){},"56d7":function(e,t,c){"use strict";c.r(t);c("e260"),c("e6cf"),c("cca6"),c("a79d");var a=c("7a23");function r(e,t,c,r,n,o){var s=Object(a["resolveComponent"])("Header"),i=Object(a["resolveComponent"])("Quotes"),l=Object(a["resolveComponent"])("Chart_panel");return Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],null,[Object(a["createVNode"])(s),Object(a["createVNode"])(i,{price:e.price,getprice:o.getprice,connectToWebSocket:o.connectToWebSocket,currencyPairs:e.currencyPairs,setSelectedPair:o.setSelectedPair,setStartValues:o.setStartValues},null,8,["price","getprice","connectToWebSocket","currencyPairs","setSelectedPair","setStartValues"]),Object(a["createVNode"])(l,{price:e.price,tradeTime:e.tradeTime,selectedPair:e.selectedPair},null,8,["price","tradeTime","selectedPair"])],64)}c("d3b7"),c("99af"),c("159b"),c("b680"),c("25f0"),c("d81d"),c("7db0"),c("a15b");var n=Object(a["withScopeId"])("data-v-869e9860");Object(a["pushScopeId"])("data-v-869e9860");var o={class:"header"},s=Object(a["createVNode"])("h1",{class:"header__title"},"CRYPTO",-1);Object(a["popScopeId"])();var i=n((function(e,t,c,r,n,i){return Object(a["openBlock"])(),Object(a["createBlock"])("header",o,[s])})),l={name:"Header"};c("9cd0");l.render=i,l.__scopeId="data-v-869e9860";var p=l,u=c("c9f9"),d=c.n(u),b=c("ad4f"),h=c.n(b),f=Object(a["withScopeId"])("data-v-4b83508f");Object(a["pushScopeId"])("data-v-4b83508f");var m=Object(a["createVNode"])("div",{class:"title_panel"},[Object(a["createVNode"])("h2",{class:"title_panel__title"},"панель котировок")],-1),O={class:"currency_bar"},j=Object(a["createVNode"])("div",{class:"currency_bar__labels"},[Object(a["createVNode"])("h3",{class:"currency_bar__label"},"Валютные пары"),Object(a["createVNode"])("h3",{class:"currency_bar__label"},"Изменения"),Object(a["createVNode"])("h3",{class:"currency_bar__label"},"Цена")],-1),v={class:"currency_bar__list"},g={class:"currency_bar__pair"},y={class:"currency_bar__growth"},_={key:0,src:d.a,alt:""},S={key:1,src:h.a,alt:""},P={class:"currency_bar__price"};Object(a["popScopeId"])();var w=f((function(e,t,c,r,n,o){return Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],null,[m,Object(a["createVNode"])("div",O,[j,Object(a["createVNode"])("ul",v,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(c.currencyPairs,(function(e){return Object(a["openBlock"])(),Object(a["createBlock"])("li",{class:"currency_bar__item",key:e,onClick:function(t){return o.selectPairOnClickHandler(e)}},[Object(a["createVNode"])("span",g,Object(a["toDisplayString"])(e.names.join(" | ")),1),Object(a["createVNode"])("span",y,[e.growth>0?(Object(a["openBlock"])(),Object(a["createBlock"])("img",_)):(Object(a["openBlock"])(),Object(a["createBlock"])("img",S)),Object(a["createTextVNode"])(" "+Object(a["toDisplayString"])(e.growth)+"% ",1)]),Object(a["createVNode"])("span",P,Object(a["toDisplayString"])(e.lastValue[1]),1)],8,["onClick"])})),128))])])],64)})),k={name:"currency_bar",props:["price","getprice","connectToWebSocket","currencyPairs","setSelectedPair","setStartValues"],methods:{selectPairOnClickHandler:function(e){this.getprice(e.names[1],e.names[0],180),this.setSelectedPair(e.names)},alive:function(){console.log("I`am alive")}},created:function(){var e=this;this.getprice(this.currencyPairs[0].names[1],this.currencyPairs[0].names[0],180),this.connectToWebSocket(),this.currencyPairs.forEach((function(t){e.setStartValues(t.names[1],t.names[0],2,t)}))}};c("94ca6");k.render=w,k.__scopeId="data-v-4b83508f";var V=k,T=Object(a["withScopeId"])("data-v-75cc62e1");Object(a["pushScopeId"])("data-v-75cc62e1");var C={class:"chart_panel"},D={class:"chart_panel__title"};Object(a["popScopeId"])();var N=T((function(e,t,c,r,n,o){var s=Object(a["resolveComponent"])("Chart");return Object(a["openBlock"])(),Object(a["createBlock"])("div",C,[Object(a["createVNode"])("span",D,Object(a["toDisplayString"])(c.selectedPair.join(" | ").toUpperCase()),1),Object(a["createVNode"])(s,{price:c.price,tradeTime:c.tradeTime},null,8,["price","tradeTime"])])})),x=Object(a["withScopeId"])("data-v-3d04ddb1"),B=x((function(e,t,c,r,n,o){var s=Object(a["resolveComponent"])("apexchart");return Object(a["openBlock"])(),Object(a["createBlock"])(s,{height:"90%",width:"99%",type:"line",options:n.chartOptions,series:n.series},null,8,["options","series"])})),I=c("ae27"),U=c.n(I),M={name:"Chart",components:{apexchart:U.a},props:["price","tradeTime"],data:function(){return{chartOptions:{chart:{id:"vuechart-example",animations:{enabled:!0}},xaxis:{categories:this.tradeTime,tickAmount:8,labels:{rotate:0}},stroke:{width:1}},series:[{name:"",data:this.price}]}}};M.render=B,M.__scopeId="data-v-3d04ddb1";var F=M,W={name:"Chart_panel",components:{Chart:F},props:["price","tradeTime","selectedPair"]};c("1393");W.render=N,W.__scopeId="data-v-75cc62e1";var H=W,A={name:"App",components:{Header:p,Quotes:V,Chart_panel:H},data:function(){return{price:[],tradeTime:[""],connection:!1,currencyPairs:[{names:["usd","btc"],lastValue:[],lastPanelUpdate:new Date,lastChartUpdate:new Date,growth:0},{names:["usd","bch"],lastValue:[],lastPanelUpdate:new Date,lastChartUpdate:new Date,growth:0},{names:["usd","eth"],lastValue:[],lastPanelUpdate:new Date,lastChartUpdate:new Date,growth:0},{names:["usd","ltc"],lastValue:[],lastPanelUpdate:new Date,lastChartUpdate:new Date,growth:0}],selectedPair:"",apiKey:"b3003fdb202608263f007675fe0a0a923091385e73cbf600d23ebfb29c30328e"}},methods:{getprice:function(e,t,c){var a=this;fetch("https://min-api.cryptocompare.com/data/v2/histominute?fsym=".concat(e,"&tsym=").concat(t,"&limit=").concat(c)).then((function(e){return e.json()})).then((function(e){e.Data.Data.forEach((function(e,t){a.price[t]=e.close.toFixed(3);var c=new Date(1e3*e.time),r=c.getHours().toString(),n=c.getMinutes().toString();1===n.length&&(n="0"+n),a.tradeTime[t]=r+":"+n,""===a.tradeTime[0]&&a.tradeTime.shift()}))}))},setStartValues:function(e,t,c,a){fetch("https://min-api.cryptocompare.com/data/v2/histominute?fsym=".concat(e,"&tsym=").concat(t,"&limit=").concat(c)).then((function(e){return e.json()})).then((function(e){e.Data.Data.forEach((function(e,t){a.lastValue[t]=e.close.toFixed(3)}))}))},connectToWebSocket:function(){var e=this,t=this.currencyPairs.map((function(e){return"0~Coinbase~".concat(e.names[1].toUpperCase(),"~").concat(e.names[0].toUpperCase())}));console.log("Open websocket"),this.connection=new WebSocket("wss://streamer.cryptocompare.com/v2?api_key="+this.apiKey),this.connection.onopen=function(){console.log("Successfully connected"),e.connection.send(JSON.stringify({action:"SubAdd",subs:t}))},this.connection.onmessage=function(t){var c=JSON.parse(t.data),a=c.P,r=c.TS;if("number"===typeof a){var n=e.currencyPairs.find((function(e){return e.names.join("")===(c.TSYM+c.FSYM).toLowerCase()})),o=((new Date).getTime()/100).toFixed()-(n.lastPanelUpdate.getTime()/100).toFixed();o>10&&(n.lastValue.push(a),n.lastValue.length>2&&n.lastValue.shift(),n.growth=Math.abs((100*n.lastValue[1]/n.lastValue[0]-100).toFixed(2)),n.names.join("")===e.selectedPair.join("")&&(e.price.pop(),e.price.push(a)),n.lastPanelUpdate=new Date);var s=(new Date).getMinutes()-n.lastChartUpdate.getMinutes();if(n.names.join("")===e.selectedPair.join("")&&0!==s){e.price.shift(),e.price.push(a);var i=new Date(1e3*r),l=i.getHours().toString(),p=i.getMinutes().toString();1===p.length&&(p="0"+p);var u=l+":"+p;e.tradeTime.shift(),e.tradeTime.push(u),n.lastChartUpdate=new Date}}},this.connection.onclose=function(e){console.log("Closing Web Socket, reason: ".concat(e.reason))}},closeSockets:function(){this.currencyPairs.forEach((function(e){return e.connection.close()}))},setSelectedPair:function(e){this.selectedPair=e}},created:function(){this.setSelectedPair(this.currencyPairs[0].names)}};c("e488");A.render=r;var E=A;Object(a["createApp"])(E).mount("#app")},"94ca6":function(e,t,c){"use strict";c("553b")},"9cd0":function(e,t,c){"use strict";c("e43d")},ad4f:function(e,t,c){e.exports=c.p+"img/arrow_down.f10daa9b.svg"},b085:function(e,t,c){},c9f9:function(e,t,c){e.exports=c.p+"img/arrow_up.b7944928.svg"},e43d:function(e,t,c){},e488:function(e,t,c){"use strict";c("f825")},f825:function(e,t,c){}});
//# sourceMappingURL=app.4fc0724f.js.map